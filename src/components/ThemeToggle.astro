---
---

<button
  id="theme-toggle"
  type="button"
  class="fixed left-[3.75rem] top-3 z-50 inline-flex h-7 w-7 items-center justify-center rounded-full border border-border/50 bg-card/80 text-muted-foreground shadow-sm backdrop-blur-md transition-all hover:border-border hover:bg-card hover:text-foreground hover:shadow-md sm:left-5 sm:top-16 sm:h-9 sm:w-9"
  aria-label="Toggle theme"
>
  <!-- Sun icon (shown in dark mode) -->
  <svg
    class="theme-icon-sun h-4 w-4 transition-transform duration-300"
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <circle cx="12" cy="12" r="4"/>
    <path d="M12 2v2"/>
    <path d="M12 20v2"/>
    <path d="m4.93 4.93 1.41 1.41"/>
    <path d="m17.66 17.66 1.41 1.41"/>
    <path d="M2 12h2"/>
    <path d="M20 12h2"/>
    <path d="m6.34 17.66-1.41 1.41"/>
    <path d="m19.07 4.93-1.41 1.41"/>
  </svg>
  <!-- Moon icon (shown in light mode) -->
  <svg
    class="theme-icon-moon h-4 w-4 transition-transform duration-300"
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
  </svg>
</button>

<style>
  /* Dark mode: show sun, hide moon */
  :global(.dark) .theme-icon-sun {
    display: block;
  }
  :global(.dark) .theme-icon-moon {
    display: none;
  }
  /* Light mode: show moon, hide sun */
  .theme-icon-sun {
    display: none;
  }
  .theme-icon-moon {
    display: block;
  }
</style>

<script>
  function setupThemeToggle() {
    const btn = document.getElementById('theme-toggle')
    if (!btn) return

    btn.addEventListener('click', () => {
      const html = document.documentElement
      const isDark = html.classList.contains('dark')

      if (isDark) {
        html.classList.remove('dark')
        localStorage.setItem('theme', 'light')
      } else {
        html.classList.add('dark')
        localStorage.setItem('theme', 'dark')
      }
    })
  }

  setupThemeToggle()
  document.addEventListener('astro:after-swap', setupThemeToggle)
</script>
