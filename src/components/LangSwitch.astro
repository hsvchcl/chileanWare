---
import type { Lang } from '../i18n'
import { useTranslations, getAlternateLang, localizeHref } from '../i18n'

interface Props {
  lang?: Lang
}

const { lang = 'en' } = Astro.props
const t = useTranslations(lang)
const altLang = getAlternateLang(lang)
const currentPath = Astro.url.pathname
const altHref = localizeHref(currentPath, altLang)
---

<a
  href={altHref}
  class="fixed left-3 top-3 z-50 inline-flex h-7 items-center gap-1 rounded-full border border-border/50 bg-card/80 px-2.5 text-[11px] font-medium text-muted-foreground shadow-sm backdrop-blur-md transition-all hover:border-border hover:bg-card hover:text-foreground hover:shadow-md sm:left-5 sm:top-5 sm:h-9 sm:gap-2 sm:px-3.5 sm:text-sm"
  aria-label={t('lang.label')}
  data-astro-prefetch
>
  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-60">
    <circle cx="12" cy="12" r="10"/>
    <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/>
    <path d="M2 12h20"/>
  </svg>
  {t('lang.switch')}
</a>
